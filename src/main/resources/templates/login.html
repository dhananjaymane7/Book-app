<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Login - BookStore Pro</title>
  <link href="https://fonts.googleapis.com/css2?family=Geist+Sans:wght@300;400;500;600;700&family=Manrope:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

  <style>
    :root {
        --background: #ffffff;
        --foreground: #000000;
        --card: #f1f5f9;
        --card-foreground: #000000;
        --primary: #007bff;
        --primary-foreground: #ffffff;
        --secondary: #ff9800;
        --secondary-foreground: #ffffff;
        --muted: #6b7280;
        --muted-foreground: #ffffff;
        --accent: #ff9800;
        --accent-foreground: #000000;
        --destructive: #dc2626;
        --destructive-foreground: #ffffff;
        --border: #e5e7eb;
        --input: #f1f5f9;
        --ring: rgba(0, 123, 255, 0.5);
        --radius: 0.5rem;
    }

    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        font-family: 'Geist Sans', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 1rem;
        color: var(--foreground);
    }

    .login-container {
        background: var(--background);
        border-radius: calc(var(--radius) * 2);
        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
        overflow: hidden;
        width: 100%;
        max-width: 900px;
        display: grid;
        grid-template-columns: 1fr 1fr;
        min-height: 600px;
    }

    .login-brand {
        background: linear-gradient(135deg, var(--primary) 0%, var(--secondary) 100%);
        padding: 3rem;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        text-align: center;
        color: white;
        position: relative;
        overflow: hidden;
    }

    .login-brand::before {
        content: '';
        position: absolute;
        top: -50%;
        left: -50%;
        width: 200%;
        height: 200%;
        background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="books" patternUnits="userSpaceOnUse" width="20" height="20"><rect width="20" height="20" fill="none"/><path d="M2 2h4v16H2zm6 0h4v16H8zm6 0h4v16h-4z" fill="rgba(255,255,255,0.1)"/></pattern></defs><rect width="100" height="100" fill="url(%23books)"/></svg>') repeat;
        opacity: 0.1;
        animation: float 20s ease-in-out infinite;
    }

    @keyframes float {
        0%, 100% { transform: translateY(0px) rotate(0deg); }
        50% { transform: translateY(-20px) rotate(2deg); }
    }

    .brand-logo {
        font-size: 3rem;
        margin-bottom: 1rem;
        position: relative;
        z-index: 1;
    }

    .brand-title {
        font-family: 'Manrope', sans-serif;
        font-size: 2.5rem;
        font-weight: 700;
        margin-bottom: 1rem;
        position: relative;
        z-index: 1;
    }

    .brand-subtitle {
        font-size: 1.125rem;
        opacity: 0.9;
        line-height: 1.6;
        position: relative;
        z-index: 1;
    }

    .login-form-container {
        padding: 3rem;
        display: flex;
        flex-direction: column;
        justify-content: center;
    }

    .form-header {
        text-align: center;
        margin-bottom: 2rem;
    }

    .form-title {
        font-family: 'Manrope', sans-serif;
        font-size: 2rem;
        font-weight: 600;
        color: var(--foreground);
        margin-bottom: 0.5rem;
    }

    .form-subtitle {
        color: var(--muted);
        font-size: 1rem;
    }

    .login-form {
        display: flex;
        flex-direction: column;
        gap: 1.5rem;
    }

    .form-group {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }

    .form-label {
        font-weight: 500;
        color: var(--foreground);
        font-size: 0.875rem;
    }

    .form-input {
        padding: 0.875rem 1rem;
        border: 2px solid var(--border);
        border-radius: var(--radius);
        background: var(--input);
        font-size: 1rem;
        transition: all 0.2s ease;
        outline: none;
    }

    .form-input:focus {
        border-color: var(--primary);
        box-shadow: 0 0 0 3px var(--ring);
        background: var(--background);
    }

    .form-input::placeholder {
        color: var(--muted);
    }

    .form-options {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin: 0.5rem 0;
    }

    .checkbox-group {
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .checkbox {
        width: 1rem;
        height: 1rem;
        accent-color: var(--primary);
    }

    .checkbox-label {
        font-size: 0.875rem;
        color: var(--muted);
    }

    .forgot-password {
        color: var(--primary);
        text-decoration: none;
        font-size: 0.875rem;
        font-weight: 500;
        transition: color 0.2s ease;
    }

    .forgot-password:hover {
        color: var(--secondary);
    }

    .login-button {
        background: var(--primary);
        color: var(--primary-foreground);
        border: none;
        padding: 1rem;
        border-radius: var(--radius);
        font-size: 1rem;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s ease;
        position: relative;
        overflow: hidden;
    }

    .login-button:hover {
        background: #0056b3;
        transform: translateY(-1px);
        box-shadow: 0 4px 12px rgba(0, 123, 255, 0.3);
    }

    .login-button:active {
        transform: translateY(0);
    }

    .login-button:disabled {
        opacity: 0.6;
        cursor: not-allowed;
        transform: none;
    }

    .divider {
        display: flex;
        align-items: center;
        margin: 1.5rem 0;
        color: var(--muted);
        font-size: 0.875rem;
    }

    .divider::before,
    .divider::after {
        content: '';
        flex: 1;
        height: 1px;
        background: var(--border);
    }

    .divider span {
        padding: 0 1rem;
    }

    .signup-link {
        text-align: center;
        margin-top: 1rem;
        color: var(--muted);
        font-size: 0.875rem;
    }

    .signup-link a {
        color: var(--primary);
        text-decoration: none;
        font-weight: 500;
    }

    .signup-link a:hover {
        color: var(--secondary);
    }

    .error-message {
        background: var(--destructive);
        color: var(--destructive-foreground);
        padding: 0.75rem 1rem;
        border-radius: var(--radius);
        font-size: 0.875rem;
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    .success-message {
        background: #10b981;
        color: white;
        padding: 0.75rem 1rem;
        border-radius: var(--radius);
        font-size: 0.875rem;
        margin-bottom: 1rem;
        display: flex;
        align-items: center;
        gap: 0.5rem;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
        .login-container {
            grid-template-columns: 1fr;
            max-width: 400px;
        }

        .login-brand {
            padding: 2rem;
            min-height: 200px;
        }

        .brand-title {
            font-size: 2rem;
        }

        .login-form-container {
            padding: 2rem;
        }

        .form-title {
            font-size: 1.5rem;
        }
    }

    @media (max-width: 480px) {
        body {
            padding: 0.5rem;
        }

        .login-form-container {
            padding: 1.5rem;
        }

        .login-brand {
            padding: 1.5rem;
        }
    }

    /* Loading Animation */
    .loading {
        display: inline-block;
        width: 1rem;
        height: 1rem;
        border: 2px solid transparent;
        border-top: 2px solid currentColor;
        border-radius: 50%;
        animation: spin 1s linear infinite;
    }

    @keyframes spin {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
    }
  </style>
</head>
<body>
<div class="login-container">
  <!-- Brand Section -->
  <div class="login-brand">
    <div class="brand-logo">
      <i class="fas fa-book-open"></i>
    </div>
    <h1 class="brand-title">BookStore Pro</h1>
    <p class="brand-subtitle">
      Your gateway to endless knowledge and literary adventures.
      Join thousands of readers discovering their next favorite book.
    </p>
  </div>

  <!-- Login Form Section -->
  <div class="login-form-container">
    <div class="form-header">
      <h2 class="form-title">Welcome Back</h2>
      <p class="form-subtitle">Sign in to your account to continue</p>
    </div>

    <!-- Error Message -->
    <div th:if="${param.error}" class="error-message">
      <i class="fas fa-exclamation-circle"></i>
      <span>Invalid username or password. Please try again.</span>
    </div>

    <!-- Success Message -->
    <div th:if="${param.logout}" class="success-message">
      <i class="fas fa-check-circle"></i>
      <span>You have been logged out successfully.</span>
    </div>

      <form th:action="@{/login}" method="post" class="login-form" id="loginForm">

          <!-- CSRF Token: REQUIRED -->
          <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />

          <div class="form-group">
              <label for="username" class="form-label">Username</label>
              <input
                      type="text"
                      id="username"
                      name="username"
                      class="form-input"
                      placeholder="Enter your username"
                      required
                      autocomplete="username"
              />
          </div>

          <div class="form-group">
              <label for="password" class="form-label">Password</label>
              <input
                      type="password"
                      id="password"
                      name="password"
                      class="form-input"
                      placeholder="Enter your password"
                      required
                      autocomplete="current-password"
              />
          </div>

          <div class="form-options">
              <div class="checkbox-group">
                  <input type="checkbox" id="remember-me" name="remember-me" class="checkbox" />
                  <label for="remember-me" class="checkbox-label">Remember me</label>
              </div>
              <a href="/forgot-password" class="forgot-password">Forgot Password?</a>
          </div>

          <button type="submit" class="login-button" id="loginBtn">
              <span class="btn-text">Sign In</span>
              <span class="loading" style="display: none;"></span>
          </button>

          <!-- Inline error message -->
          <div th:if="${param.error}" class="error-message">
              <p>Invalid username or password.</p>
          </div>

          <!-- Logout success message -->
          <div th:if="${param.logout}" class="logout-message">
              <p>You have been logged out successfully.</p>
          </div>
      </form>


      <!-- Popup alert on error -->
      <script th:if="${param.error}">
          alert('Invalid username or password.');
      </script>




      <div class="divider">
      <span>New to BookStore Pro?</span>
    </div>

    <div class="signup-link">
      Don't have an account? <a href="/register">Create one here</a>
    </div>
  </div>
</div>

<script>
  // Form submission handling
  document.getElementById('loginForm').addEventListener('submit', function(e) {
      const loginBtn = document.getElementById('loginBtn');
      const btnText = loginBtn.querySelector('.btn-text');
      const loading = loginBtn.querySelector('.loading');

      // Show loading state
      btnText.style.display = 'none';
      loading.style.display = 'inline-block';
      loginBtn.disabled = true;

      // Re-enable button after 3 seconds (in case of error)
      setTimeout(() => {
          btnText.style.display = 'inline';
          loading.style.display = 'none';
          loginBtn.disabled = false;
      }, 3000);
  });

  // Input validation
  const inputs = document.querySelectorAll('.form-input');
  inputs.forEach(input => {
      input.addEventListener('blur', function() {
          if (this.value.trim() === '') {
              this.style.borderColor = 'var(--destructive)';
          } else {
              this.style.borderColor = 'var(--border)';
          }
      });

      input.addEventListener('input', function() {
          this.style.borderColor = 'var(--border)';
      });
  });

  // Email validation
  const emailInput = document.getElementById('username');
  emailInput.addEventListener('blur', function() {
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (this.value && !emailRegex.test(this.value)) {
          this.style.borderColor = 'var(--destructive)';
      }
  });
</script>
</body>
</html>
